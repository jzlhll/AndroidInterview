

### 官方架构指南学习

学习官方的文档，不是做翻译，而是把重点写出，并用自己的话讲出来。

> 就像我上一篇文章学习架构要关注的是思想重点，而非某种模式的教条模板代码。
>
> [android MVC/MVP/MVVM/MVI架构发展历程和编写范式-CSDN博客](https://blog.csdn.net/jzlhll123/article/details/149835752?)提到的：**业务分层**，**数据驱动**，**单向数据流**, **事件绑定监听**, **生命周期感知**， **关注内存泄露**…

[应用架构指南  | App architecture  | Android Developers](https://developer.android.com/topic/architecture?hl=zh-cn)

#### 原则

我们应该关注和思考，开发一个稳健，易于维护的代码需要有哪些原则？

* 分离关注点

  最常见的臃肿就是在Activity/Fragment中一把梭，编写所有代码。我们需要让它们保持仅仅处理界面和交互的逻辑。

* 采用数据驱动模型

  数据它们应该独立于界面组件，它们的生命周期与组件应该没有关联。

  数据应该是持久化的，应用杀死后不会丢失数据，没有网络等条件下能继续工作。

  增加可测试性和稳定性。

* 单一数据源

​	定义新数据类型时，它们应该被放在单一数据源里面，公开出去的是不可变类型；而为了修改，则公开函数或者接收其他类型的事件。这样做的好处：更改数据集中在一起；保护数据不被到处修改；可追溯数据的变更，更容易发现bug。它们可能是数据库，网络请求单例，在其他情况，可能是ViewModel或者界面。

* 单向数据流

  单一数据源，往往就要求单项数据流一起使用。**状态，只朝一个方向流动，修改数据的事件朝相反的方向流动。**

  例如，应用数据通常从数据源流向界面。用户事件（例如按钮按下操作）从界面流向单一数据源，在单一数据源中应用数据被修改并以不可变类型公开。

#### 推荐架构

> **注意**：本页中提供的建议和最佳实践可应用于各种应用。遵循这些建议和最佳实践可以提升应用的可扩展性、质量和稳健性，并可使应用更易于测试。不过，您应该将这些提示视为指南，并视需要进行调整来满足您的要求。
>
> 官方这句话的意思是，你不要教条盲从，非要找一个复杂开发框架，把代码写的十分复杂，才是好的吗？应该找到合适的开发方式。

基于原则，一个应用至少有2层：

